{"ast":null,"code":"import { query as q } from 'faunadb';\nimport { authClient } from '@/utils/fauna-client';\nimport { getAuthCookie, removeAuthCookie } from '@/utils/auth-cookies';\nexport default async function logout(req, res) {\n  const token = getAuthCookie(req);\n  if (!token) return res.status(200).end();\n\n  try {\n    await authClient(token).query(q.Logout(false));\n    removeAuthCookie(res);\n    res.status(200).end();\n  } catch (error) {\n    console.error(error);\n    res.status(error.requestResult.statusCode).send(error.message);\n  }\n}","map":{"version":3,"sources":["/Users/marten.frisk/nextfauna/pages/api/logout.js"],"names":["query","q","authClient","getAuthCookie","removeAuthCookie","logout","req","res","token","status","end","Logout","error","console","requestResult","statusCode","send","message"],"mappings":"AAAA,SAASA,KAAK,IAAIC,CAAlB,QAA2B,SAA3B;AACA,SAASC,UAAT,QAA2B,sBAA3B;AACA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,sBAAhD;AAEA,eAAe,eAAeC,MAAf,CAAsBC,GAAtB,EAA2BC,GAA3B,EAAgC;AAC9C,QAAMC,KAAK,GAAGL,aAAa,CAACG,GAAD,CAA3B;AAEA,MAAI,CAACE,KAAL,EAAY,OAAOD,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,GAAhB,EAAP;;AAEZ,MAAI;AACH,UAAMR,UAAU,CAACM,KAAD,CAAV,CAAkBR,KAAlB,CAAwBC,CAAC,CAACU,MAAF,CAAS,KAAT,CAAxB,CAAN;AACAP,IAAAA,gBAAgB,CAACG,GAAD,CAAhB;AACAA,IAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACA,GAJD,CAIE,OAAOE,KAAP,EAAc;AACfC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAL,IAAAA,GAAG,CAACE,MAAJ,CAAWG,KAAK,CAACE,aAAN,CAAoBC,UAA/B,EAA2CC,IAA3C,CAAgDJ,KAAK,CAACK,OAAtD;AACA;AACD","sourcesContent":["import { query as q } from 'faunadb'\nimport { authClient } from '@/utils/fauna-client'\nimport { getAuthCookie, removeAuthCookie } from '@/utils/auth-cookies'\n\nexport default async function logout(req, res) {\n\tconst token = getAuthCookie(req)\n\n\tif (!token) return res.status(200).end()\n\n\ttry {\n\t\tawait authClient(token).query(q.Logout(false))\n\t\tremoveAuthCookie(res)\n\t\tres.status(200).end()\n\t} catch (error) {\n\t\tconsole.error(error)\n\t\tres.status(error.requestResult.statusCode).send(error.message)\n\t}\n}"]},"metadata":{},"sourceType":"module"}