{"ast":null,"code":"import _regeneratorRuntime from \"/Users/marten.frisk/nextfauna/node_modules/@babel/runtime/regenerator\";\nimport _taggedTemplateLiteral from \"/Users/marten.frisk/nextfauna/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _asyncToGenerator from \"/Users/marten.frisk/nextfauna/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/marten.frisk/nextfauna/components/leagues.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n      mutation LeaveLeague($userID: [ID], $leagueID: ID!, $leagueName: String!) {\\n        partialUpdateLeague(id: $leagueID, data: { name: $leagueName, members: { disconnect: $userID } } ) {\\n          name\\n        }\\n      }\\n    \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n      mutation JoinLeague($userID: [ID], $leagueID: ID!) {\\n        partialUpdateLeague(id: $leagueID, data: { members: { connect: $userID } } ) {\\n          name\\n        }\\n      }\\n    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { graphQLClient } from '@/utils/graphql-client';\nimport Link from 'next/link';\nimport { UserContext } from '@/utils/user-context';\nimport { gql } from 'graphql-request';\nimport { useContext } from 'react';\n\nvar Leagues = function Leagues(_ref) {\n  _s();\n\n  var token = _ref.token,\n      leagueData = _ref.leagueData;\n\n  var _useContext = useContext(UserContext),\n      userID = _useContext.userID,\n      setUserID = _useContext.setUserID; // const fetcher = (url) => fetch(url).then((r) => r.json())\n  // const { data: user } = useSWR('/api/user')\n  // useEffect(() => {\n  // \tsetUserID(user)\n  // }, [user])\n  // const { mutate } = useSWR(\n  // \tgql`\n  //     {\n  //       allLeagues {\n  //         data {\n  //           name\n  //         }\n  //       }\n  //     }\n  //   `,\n  // \tfetcher\n  // )\n\n\n  var joinLeague = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(userID, leagueID) {\n      var mutation, variables;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              mutation = gql(_templateObject());\n              variables = {\n                userID: userID,\n                leagueID: leagueID\n              };\n              _context.prev = 2;\n              _context.next = 5;\n              return graphQLClient(token).setHeader('X-Schema-Preview', 'partial-update-mutation').request(mutation, variables);\n\n            case 5:\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](2);\n              console.error(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 7]]);\n    }));\n\n    return function joinLeague(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var leaveLeague = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userID, leagueID, leagueName) {\n      var mutation, variables;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              mutation = gql(_templateObject2());\n              variables = {\n                userID: userID,\n                leagueID: leagueID,\n                leagueName: leagueName\n              };\n              _context2.prev = 2;\n              _context2.next = 5;\n              return graphQLClient(token).setHeader('X-Schema-Preview', 'partial-update-mutation').request(mutation, variables);\n\n            case 5:\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](2);\n              console.error(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 7]]);\n    }));\n\n    return function leaveLeague(_x3, _x4, _x5) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return leagueData && /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Leagues\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }, _this), leagueData.data.map(function (league) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/league/[id]\",\n            as: \"/league/\".concat(league._id),\n            children: league.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 8\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }, _this), league.members.data.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-2\",\n          children: [\"-\", league.members.data.map(function (member) {\n            return /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2\",\n              children: member.username\n            }, member._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 10\n            }, _this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 8\n        }, _this)]\n      }, league._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 6\n      }, _this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 4\n  }, _this);\n};\n\n_s(Leagues, \"rB5w2V1OT/pbhcEPoimjYWzCQlc=\");\n\n_c = Leagues;\nexport default Leagues;\n\nvar _c;\n\n$RefreshReg$(_c, \"Leagues\");","map":{"version":3,"sources":["/Users/marten.frisk/nextfauna/components/leagues.tsx"],"names":["graphQLClient","Link","UserContext","gql","useContext","Leagues","token","leagueData","userID","setUserID","joinLeague","leagueID","mutation","variables","setHeader","request","console","error","leaveLeague","leagueName","data","map","league","_id","name","members","length","member","username"],"mappings":"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","sourcesContent":["import { graphQLClient } from '@/utils/graphql-client'\nimport Link from 'next/link'\nimport { UserContext } from '@/utils/user-context'\nimport { gql } from 'graphql-request'\nimport { useContext, useEffect } from 'react'\nimport useSWR from 'swr'\n\nconst Leagues = ({ token, leagueData }: { token: any, leagueData: any }) => {\n\tconst { userID, setUserID } = useContext(UserContext)\n\t// const fetcher = (url) => fetch(url).then((r) => r.json())\n\t// const { data: user } = useSWR('/api/user')\n\t// useEffect(() => {\n\t// \tsetUserID(user)\n\t// }, [user])\n\t// const { mutate } = useSWR(\n\t// \tgql`\n\t//     {\n\t//       allLeagues {\n\t//         data {\n\t//           name\n\t//         }\n\t//       }\n\t//     }\n\t//   `,\n\t// \tfetcher\n\t// )\n\n\n\tconst joinLeague = async (userID, leagueID) => {\n\t\tconst mutation = gql`\n      mutation JoinLeague($userID: [ID], $leagueID: ID!) {\n        partialUpdateLeague(id: $leagueID, data: { members: { connect: $userID } } ) {\n          name\n        }\n      }\n    `\n\n\t\tconst variables = {\n\t\t\tuserID,\n\t\t\tleagueID\n\t\t}\n\n\t\ttry {\n\t\t\tawait graphQLClient(token)\n\t\t\t\t.setHeader('X-Schema-Preview', 'partial-update-mutation')\n\t\t\t\t.request(mutation, variables)\n\t\t\t// mutate()\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\tconst leaveLeague = async (userID, leagueID, leagueName) => {\n\t\tconst mutation = gql`\n      mutation LeaveLeague($userID: [ID], $leagueID: ID!, $leagueName: String!) {\n        partialUpdateLeague(id: $leagueID, data: { name: $leagueName, members: { disconnect: $userID } } ) {\n          name\n        }\n      }\n    `\n\n\t\tconst variables = {\n\t\t\tuserID,\n\t\t\tleagueID,\n\t\t\tleagueName\n\t\t}\n\n\t\ttry {\n\t\t\tawait graphQLClient(token)\n\t\t\t\t.setHeader('X-Schema-Preview', 'partial-update-mutation')\n\t\t\t\t.request(mutation, variables)\n\t\t\t// mutate()\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\n\treturn (\n\t\tleagueData && (\n\t\t\t<div>\n\t\t\t\t<p>Leagues</p>\n\t\t\t\t{leagueData.data.map((league) => (\n\t\t\t\t\t<div className=\"flex\" key={league._id}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Link href=\"/league/[id]\" as={`/league/${league._id}`}>\n\t\t\t\t\t\t\t\t{league.name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* {league.members.data.some((member) => member._id === userID.id) ? (\n\t\t\t\t\t\t\t<button onClick={() => leaveLeague(userID.id, league._id, league.name)}>Leave</button>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<button onClick={() => joinLeague(userID.id, league._id)}>Join</button>\n\t\t\t\t\t\t)} */}\n\t\t\t\t\t\t{league.members.data.length > 0 && (\n\t\t\t\t\t\t\t<div className=\"ml-2\">\n\t\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\t{league.members.data.map((member) => (\n\t\t\t\t\t\t\t\t\t<span className=\"ml-2\" key={member._id}>\n\t\t\t\t\t\t\t\t\t\t{member.username}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t)\n\t)\n}\n\nexport default Leagues"]},"metadata":{},"sourceType":"module"}