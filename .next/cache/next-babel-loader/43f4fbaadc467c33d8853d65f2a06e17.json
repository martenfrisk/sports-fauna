{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/marten.frisk/nextfauna/pages/index.tsx\";\nimport useSWR from 'swr';\nimport Link from 'next/link';\nimport { gql } from 'graphql-request';\nimport Layout from '../components/layout';\nimport { graphQLClient } from '../utils/graphql-client';\nimport { getAuthCookie } from '@/utils/auth-cookies';\n\nconst Home = ({\n  token,\n  upcomingGames\n}) => {\n  console.log(upcomingGames);\n\n  const fetcher = async query => await graphQLClient(token).request(query);\n\n  const {\n    data,\n    error,\n    mutate\n  } = useSWR(gql`\n      {\n        allTodos {\n          data {\n            _id\n            task\n            completed\n          }\n        }    \n      }\n    `, fetcher);\n  if (error) return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Error...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 3\n  }, this);\n\n  const toggleTodo = async (id, completed) => {\n    const query = gql`\n      mutation PartialUpdateTodo($id: ID!, $completed: Boolean!) {\n        partialUpdateTodo(id: $id, data: { completed: $completed }) {\n          _id\n          completed\n        }\n      }\n    `;\n    const variables = {\n      id,\n      completed: !completed\n    };\n\n    try {\n      await graphQLClient(token).setHeader('X-Schema-Preview', 'partial-update-mutation').request(query, variables);\n      mutate();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const deleteATodo = async id => {\n    const query = gql`\n      mutation DeleteATodo($id: ID!) {\n        deleteTodo(id: $id) {\n          _id\n        }\n      }\n    `;\n\n    try {\n      await graphQLClient(token).request(query, {\n        id\n      });\n      mutate();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center w-full mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl\",\n        children: \"Next Fauna GraphQL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 mb-6\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/new\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"px-4 py-2 text-white rounded-md hover:underline hover:text-blue-700 bg-gradient-to-tr from-blue-800 to-blue-500\",\n            children: \"Create new\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }, this), upcomingGames ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-2 font-light\",\n          children: \"Next 5 PL Games\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 7\n        }, this), upcomingGames.events.slice(0, 5).map(event => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between w-full mb-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-1/3\",\n            children: event.strHomeTeam\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-1/3\",\n            children: event.strAwayTeam\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-1/3\",\n            children: event.dateEvent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 9\n          }, this)]\n        }, event.idEvent, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 8\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 6\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 3\n  }, this);\n};\n\nexport async function getServerSideProps(ctx) {\n  const token = getAuthCookie(ctx.req);\n  const upcomingGames = await fetch('https://www.thesportsdb.com/api/v1/json/1/eventsnextleague.php?id=4328').then(res => res.json());\n  return {\n    props: {\n      token: token || null,\n      upcomingGames\n    }\n  };\n}\nexport default Home;","map":{"version":3,"sources":["/Users/marten.frisk/nextfauna/pages/index.tsx"],"names":["useSWR","Link","gql","Layout","graphQLClient","getAuthCookie","Home","token","upcomingGames","console","log","fetcher","query","request","data","error","mutate","toggleTodo","id","completed","variables","setHeader","deleteATodo","events","slice","map","event","strHomeTeam","strAwayTeam","dateEvent","idEvent","getServerSideProps","ctx","req","fetch","then","res","json","props"],"mappings":"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","sourcesContent":["import useSWR from 'swr'\nimport Link from 'next/link'\nimport { gql } from 'graphql-request'\nimport Layout from '../components/layout'\nimport { graphQLClient } from '../utils/graphql-client'\nimport { getAuthCookie } from '@/utils/auth-cookies'\n\nconst Home = ({token, upcomingGames}: { token: any, upcomingGames: any }) => {\n\tconsole.log(upcomingGames)\n\tconst fetcher = async (query) => await graphQLClient(token).request(query)\n\tconst { data, error, mutate } = useSWR(\n\t\tgql`\n      {\n        allTodos {\n          data {\n            _id\n            task\n            completed\n          }\n        }    \n      }\n    `, fetcher\n\t)\n\n\tif (error) return (\n\t\t<Layout>\n\t\t\t<div>Error...</div>\n\t\t</Layout>\n\t)\n\n\tconst toggleTodo = async (id, completed) => {\n\t\tconst query = gql`\n      mutation PartialUpdateTodo($id: ID!, $completed: Boolean!) {\n        partialUpdateTodo(id: $id, data: { completed: $completed }) {\n          _id\n          completed\n        }\n      }\n    `\n\n\t\tconst variables = {\n\t\t\tid,\n\t\t\tcompleted: !completed,\n\t\t}\n\n\t\ttry {\n\t\t\tawait graphQLClient(token)\n\t\t\t\t.setHeader('X-Schema-Preview', 'partial-update-mutation')\n\t\t\t\t.request(query, variables)\n\t\t\tmutate()\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\n\tconst deleteATodo = async (id) => {\n\t\tconst query = gql`\n      mutation DeleteATodo($id: ID!) {\n        deleteTodo(id: $id) {\n          _id\n        }\n      }\n    `\n\n\t\ttry {\n\t\t\tawait graphQLClient(token).request(query, { id })\n\t\t\tmutate()\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"flex flex-col items-center w-full mx-auto\">\n\t\t\t\t<h1 className=\"text-3xl\">Next Fauna GraphQL</h1>\n\t\t\t\t<div className=\"mt-2 mb-6\">\n\t\t\t\t\t<Link href=\"/new\">\n\t\t\t\t\t\t<a className=\"px-4 py-2 text-white rounded-md hover:underline hover:text-blue-700 bg-gradient-to-tr from-blue-800 to-blue-500\">Create new</a>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n     \n\t\t\t\t{upcomingGames ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"mb-2 font-light\">Next 5 PL Games</p>\n\t\t\t\t\t\t{upcomingGames.events.slice(0, 5).map((event) => (\n\t\t\t\t\t\t\t<div key={event.idEvent} className=\"flex justify-between w-full mb-1\">\n\t\t\t\t\t\t\t\t<div className=\"w-1/3\">\n\t\t\t\t\t\t\t\t\t{event.strHomeTeam}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"w-1/3\">\n\t\t\t\t\t\t\t\t\t{event.strAwayTeam}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"w-1/3\">\n\t\t\t\t\t\t\t\t\t{event.dateEvent}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t): (\n\t\t\t\t\t<div>Loading...</div>\n\t\t\t\t)}\n\n\t\t\t</div>\n\t\t</Layout>\n\t)\n}\n\nexport async function getServerSideProps(ctx: any) {\n\tconst token = getAuthCookie(ctx.req)\n\tconst upcomingGames = await fetch('https://www.thesportsdb.com/api/v1/json/1/eventsnextleague.php?id=4328').then(res => res.json())\n\treturn { props: { \n\t\ttoken: token || null,\n\t\tupcomingGames\n\t} }\n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}