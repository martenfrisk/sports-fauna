{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/marten.frisk/nextfauna/pages/index.tsx\";\nimport useSWR from 'swr';\nimport Link from 'next/link';\nimport { gql } from 'graphql-request';\nimport Layout from '../components/layout';\nimport { graphQLClient } from '../utils/graphql-client';\nimport { getAuthCookie } from '@/utils/auth-cookies';\n\nconst Home = ({\n  token,\n  upcomingGames\n}) => {\n  console.log(upcomingGames);\n\n  const fetcher = async query => await graphQLClient(token).request(query);\n\n  const {\n    data,\n    error,\n    mutate\n  } = useSWR(gql`\n      {\n        allTodos {\n          data {\n            _id\n            task\n            completed\n          }\n        }    \n      }\n    `, fetcher);\n  if (error) return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Error...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 3\n  }, this);\n\n  const toggleTodo = async (id, completed) => {\n    const query = gql`\n      mutation PartialUpdateTodo($id: ID!, $completed: Boolean!) {\n        partialUpdateTodo(id: $id, data: { completed: $completed }) {\n          _id\n          completed\n        }\n      }\n    `;\n    const variables = {\n      id,\n      completed: !completed\n    };\n\n    try {\n      await graphQLClient(token).setHeader('X-Schema-Preview', 'partial-update-mutation').request(query, variables);\n      mutate();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const deleteATodo = async id => {\n    const query = gql`\n      mutation DeleteATodo($id: ID!) {\n        deleteTodo(id: $id) {\n          _id\n        }\n      }\n    `;\n\n    try {\n      await graphQLClient(token).request(query, {\n        id\n      });\n      mutate();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center w-full mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl\",\n        children: \"Next Fauna GraphQL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 mb-6\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/new\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"px-4 py-2 text-white rounded-md hover:underline hover:text-blue-700 bg-gradient-to-tr from-blue-800 to-blue-500\",\n            children: \"Create new\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }, this), data ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: data.allTodos.data.map(todo => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-start w-full my-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => toggleTodo(todo._id, todo.completed),\n            className: `w-1/2 cursor-pointer italic hover:text-blue-700 ${todo.completed ? 'line-through' : 'no-underline'}`,\n            children: todo.task\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/todo/[id]\",\n            as: `/todo/${todo._id}`,\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"px-2 mx-2 border-2 border-blue-700 rounded-md\",\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => deleteATodo(todo._id),\n            className: \"px-2 border-2 border-red-700 rounded-md\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 9\n          }, this)]\n        }, todo._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 8\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 6\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 3\n  }, this);\n};\n\nexport async function getServerSideProps(ctx) {\n  const token = getAuthCookie(ctx.req);\n  const upcomingGames = await fetch('https://www.thesportsdb.com/api/v1/json/1/eventsnextleague.php?id=4328').then(res => res.json());\n  return {\n    props: {\n      token: token || null,\n      upcomingGames\n    }\n  };\n}\nexport default Home;","map":{"version":3,"sources":["/Users/marten.frisk/nextfauna/pages/index.tsx"],"names":["useSWR","Link","gql","Layout","graphQLClient","getAuthCookie","Home","token","upcomingGames","console","log","fetcher","query","request","data","error","mutate","toggleTodo","id","completed","variables","setHeader","deleteATodo","allTodos","map","todo","_id","task","getServerSideProps","ctx","req","fetch","then","res","json","props"],"mappings":"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","sourcesContent":["import useSWR from 'swr'\nimport Link from 'next/link'\nimport { gql } from 'graphql-request'\nimport Layout from '../components/layout'\nimport { graphQLClient } from '../utils/graphql-client'\nimport { getAuthCookie } from '@/utils/auth-cookies'\n\nconst Home = ({token, upcomingGames}: { token: any, upcomingGames: any }) => {\n\tconsole.log(upcomingGames)\n\tconst fetcher = async (query) => await graphQLClient(token).request(query)\n\tconst { data, error, mutate } = useSWR(\n\t\tgql`\n      {\n        allTodos {\n          data {\n            _id\n            task\n            completed\n          }\n        }    \n      }\n    `, fetcher\n\t)\n\n\tif (error) return (\n\t\t<Layout>\n\t\t\t<div>Error...</div>\n\t\t</Layout>\n\t)\n\n\tconst toggleTodo = async (id, completed) => {\n\t\tconst query = gql`\n      mutation PartialUpdateTodo($id: ID!, $completed: Boolean!) {\n        partialUpdateTodo(id: $id, data: { completed: $completed }) {\n          _id\n          completed\n        }\n      }\n    `\n\n\t\tconst variables = {\n\t\t\tid,\n\t\t\tcompleted: !completed,\n\t\t}\n\n\t\ttry {\n\t\t\tawait graphQLClient(token)\n\t\t\t\t.setHeader('X-Schema-Preview', 'partial-update-mutation')\n\t\t\t\t.request(query, variables)\n\t\t\tmutate()\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\n\tconst deleteATodo = async (id) => {\n\t\tconst query = gql`\n      mutation DeleteATodo($id: ID!) {\n        deleteTodo(id: $id) {\n          _id\n        }\n      }\n    `\n\n\t\ttry {\n\t\t\tawait graphQLClient(token).request(query, { id })\n\t\t\tmutate()\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className=\"flex flex-col items-center w-full mx-auto\">\n\t\t\t\t<h1 className=\"text-3xl\">Next Fauna GraphQL</h1>\n\t\t\t\t<div className=\"mt-2 mb-6\">\n\t\t\t\t\t<Link href=\"/new\">\n\t\t\t\t\t\t<a className=\"px-4 py-2 text-white rounded-md hover:underline hover:text-blue-700 bg-gradient-to-tr from-blue-800 to-blue-500\">Create new</a>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n     \n\t\t\t\t{data ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{data.allTodos.data.map((todo) => (\n\t\t\t\t\t\t\t<div key={todo._id} className=\"flex justify-start w-full my-2\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tonClick={() => toggleTodo(todo._id, todo.completed)}\n\t\t\t\t\t\t\t\t\tclassName={`w-1/2 cursor-pointer italic hover:text-blue-700 ${todo.completed ? 'line-through' : 'no-underline'}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{todo.task}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<Link href=\"/todo/[id]\" as={`/todo/${todo._id}`}>\n\t\t\t\t\t\t\t\t\t<a className=\"px-2 mx-2 border-2 border-blue-700 rounded-md\">Edit</a>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t<span onClick={() => deleteATodo(todo._id)} className=\"px-2 border-2 border-red-700 rounded-md\">\n                Delete\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t): (\n\t\t\t\t\t<div>Loading...</div>\n\t\t\t\t)}\n\n\t\t\t</div>\n\t\t</Layout>\n\t)\n}\n\nexport async function getServerSideProps(ctx: any) {\n\tconst token = getAuthCookie(ctx.req)\n\tconst upcomingGames = await fetch('https://www.thesportsdb.com/api/v1/json/1/eventsnextleague.php?id=4328').then(res => res.json())\n\treturn { props: { \n\t\ttoken: token || null,\n\t\tupcomingGames\n\t} }\n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}