{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/marten.frisk/nextfauna/pages/index.tsx\";\nimport useSWR from 'swr';\nimport Link from 'next/link';\nimport { gql } from 'graphql-request';\nimport Layout from '../components/layout';\nimport { graphQLClient } from '../utils/graphql-client';\n\nconst fetcher = async query => await graphQLClient.request(query);\n\nconst Home = () => {\n  const {\n    data,\n    error,\n    mutate\n  } = useSWR(gql`\n      {\n        allTodos {\n          data {\n            _id\n            task\n            completed\n          }\n        }    \n      }\n    `, fetcher);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Error...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 20\n  }, this);\n\n  const toggleTodo = async (id, completed) => {\n    const query = gql`\n      mutation PartialUpdateTodo($id: ID!, $completed: Boolean!) {\n        partialUpdateTodo(id: $id, data: { completed: $completed }) {\n          _id\n          completed\n        }\n      }\n    `;\n    const variables = {\n      id,\n      completed: !completed\n    };\n\n    try {\n      await graphQLClient.request(query, variables);\n      mutate();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const deleteATodo = async id => {\n    const query = gql`\n      mutation DeleteATodo($id: ID!) {\n        deleteTodo(id: $id) {\n          _id\n        }\n      }\n    `;\n\n    try {\n      await graphQLClient.request(query, {\n        id\n      });\n      mutate();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Next Fauna GraphQL\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      href: \"/new\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        children: \"Create new todo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 4\n    }, this), data ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col flex-wrap\",\n      children: data.allTodos.data.map(todo => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => toggleTodo(todo._id, todo.completed),\n          style: todo.completed ? {\n            textDecorationLine: 'line-through'\n          } : {\n            textDecorationLine: 'none'\n          },\n          children: todo.task\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/todo/[id]\",\n          as: `/todo/${todo._id}`,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => deleteATodo(todo._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 8\n        }, this)]\n      }, todo._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 3\n  }, this);\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/marten.frisk/nextfauna/pages/index.tsx"],"names":["useSWR","Link","gql","Layout","graphQLClient","fetcher","query","request","Home","data","error","mutate","toggleTodo","id","completed","variables","console","deleteATodo","allTodos","map","todo","_id","textDecorationLine","task"],"mappings":"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","sourcesContent":["import useSWR from 'swr'\nimport Link from 'next/link'\nimport { gql } from 'graphql-request'\nimport Layout from '../components/layout'\nimport { graphQLClient } from '../utils/graphql-client'\n\nconst fetcher = async (query) => await graphQLClient.request(query)\n\nconst Home = () => {\n\tconst { data, error, mutate } = useSWR(\n\t\tgql`\n      {\n        allTodos {\n          data {\n            _id\n            task\n            completed\n          }\n        }    \n      }\n    `, fetcher\n\t)\n\n\tif (error) return <div>Error...</div>\n\n\tconst toggleTodo = async (id, completed) => {\n\t\tconst query = gql`\n      mutation PartialUpdateTodo($id: ID!, $completed: Boolean!) {\n        partialUpdateTodo(id: $id, data: { completed: $completed }) {\n          _id\n          completed\n        }\n      }\n    `\n\n\t\tconst variables = {\n\t\t\tid,\n\t\t\tcompleted: !completed,\n\t\t}\n\n\t\ttry {\n\t\t\tawait graphQLClient.request(query, variables)\n\t\t\tmutate()\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\n\tconst deleteATodo = async (id) => {\n\t\tconst query = gql`\n      mutation DeleteATodo($id: ID!) {\n        deleteTodo(id: $id) {\n          _id\n        }\n      }\n    `\n\n\t\ttry {\n\t\t\tawait graphQLClient.request(query, { id })\n\t\t\tmutate()\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h1>Next Fauna GraphQL</h1>\n\t\t\t<Link href=\"/new\">\n\t\t\t\t<a>Create new todo</a>\n\t\t\t</Link>\n     \n\t\t\t{data ? (\n\t\t\t\t<div className=\"flex flex-col flex-wrap\">\n\t\t\t\t\t{data.allTodos.data.map((todo) => (\n\t\t\t\t\t\t<div key={todo._id} className=\"w-full\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tonClick={() => toggleTodo(todo._id, todo.completed)}\n\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\ttodo.completed\n\t\t\t\t\t\t\t\t\t\t? { textDecorationLine: 'line-through' }\n\t\t\t\t\t\t\t\t\t\t: { textDecorationLine: 'none' }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{todo.task}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<Link href=\"/todo/[id]\" as={`/todo/${todo._id}`}>\n\t\t\t\t\t\t\t\t<a>Edit</a>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<span onClick={() => deleteATodo(todo._id)}>\n                Delete\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t): (\n\t\t\t\t<div>Loading...</div>\n\t\t\t)}\n\t\t</Layout>\n\t)\n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}